NAS-Pi ==> Network Attached Storage system for the Raspberry Pi.
Copyright 2013 Guru Digital Solutions

This program is free software; you can redistribute it and/or
modify it under the terms of the GNU General Public License
as published by the Free Software Foundation; either version 2
of the License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program; if not, write to the Free Software
Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston, MA  02110-1301, USA.

Feel free to contact me with any questions, comments, suggestions, or whatever
at brian@gurudigitalsolutions.com, or view our site at www.gurudigitalsolutions.com.

=====================================================================================

NAS-Pi is a project meant to turn your Raspberry Pi into a network attached storage
system.  You can create user accounts, assign permissions to user groups, and
add all sorts of mount points for local devices and remote machines.

There is currently not an installer, so I strongly suggest either reading all of the
code (haha), or visiting our FAQ for the project at 
www.gurudigitalsolutions.com/projects/naspi/faq if you would like to get this up
and running.

=====================================================================================

Dependencies
------------

This was developed and tested using Raspbian on the Raspberry Pi.  That being said,
the following dependencies are for Raspbian, but it wouldn't surprise me if this
project is extremely portable.

apache2
php5
php5-cli
samba
sshfs
git

=====================================================================================

Installing
----------

Since this was a work in progress on an already started Raspberry Pi, this process
will probably need to be refined.  Send a line to brian@gurudigitalsolutions.com if
you run into hiccups.

Follow the process to write a Raspbian image to your SD Card from:
	http://www.raspberrypi.org/downloads
	
Boot up and go through the installer process for Raspbian.

Once you are at a command prompt,

Create 'media' user:
	sudo useradd -d /home/media -m media
	sudo passwd media
	
Install dependencies:
	sudo apt-get install apache2 php5 php5-cli samba sshfs git

Set up FUSE:
	sudo nano /etc/fuse.conf
	
	Uncomment the "user_allow_other" line.
	(Hit ctrl+o to save, then ctrl+x to exit nano)

Edit Apache configuration:
	sudo nano /etc/apache2/sites-available/default
	
	Change the line that starts with DocumentRoot to:
		DocumentRoot /home/media/public_html
		
	Change the line that has Directory /var/www to:
		Directory /home/media/public_html
		
	Save and exit nano.
	
Create public_html folder:
	sudo mkdir /home/media/public_html
	sudo chown media:media /home/media/public_html
	
Download the source for NAS-Pi:
	sudo su media
	cd ~
	git clone git://github.com/gurudvlp/NAS-Pi.git
	mv NAS-Pi naspi

Put the public_html files where they belong:
	mv naspi/public_html/* public_html
	
Create data directories:
	exit
	mkdir naspi/modules/files/sources/data
	sudo chmod ugo+rwx naspi/modules/files/sources/data
	mkdir naspi/modules/users/accounts
	mkdir naspi/modules/users/sessions
	sudo chmod ugo+rwx naspi/modules/users/accounts
	sudo chmod ugo+rwx naspi/modules/users/sessions

Create backend directories:
	sudo mkdir /etc/naspi

Copy backend config files:
	cd ~/naspi
	sudo cp -r backend/etc/naspi/* /etc/naspi
	sudo cp backend/etc/init.d/naspid /etc/init.d/naspid
	sudo cp backend/usr/bin/naspid /usr/bin/naspid
=====================================================================================

The NAS-Pi mounting daemon does not run by default yet.  It's still a work in
progress, and we haven't gotten to that point.  So, to run the daemon, type:
	sudo /home/media/naspi/mount-naspid start

At this point, you should be able to type the IP Address of your Raspberry Pi into
a web browser, and start using it.

Well in theory.  I have a feeling that I missed a few steps.  Fairly soon I'll start
with a fresh install of Raspbian and follow my own guide to figure out what is
missing.

Enjoy :)
